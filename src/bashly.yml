name: ges-tool
help: CLI for GCP GenAI App Builder Enterprise Search.  
version: 0.1.0

environment_variables:
- name: gcp_project_number
  required: true
  help: Set your GCP Enterprise Search Project Number (not project id)
- name: datastore_name
  required: true
  help: Data Store name of the format <data_store>_<some_number>"
- name: gcp_access_token
  required: true
  help: GCP access-token. i.e. output of  `gcloud auth print-access-token` or obtain access token using service account.

commands:
- name: init
  alias: i
  help: Checks for gcloud authentication and installs dependent tools

- name: usearch
  alias: s
  help: Perform a single unstructured search query

  args:
  - name: query 
    required: true
    help: search query string
  - name: page_size 
    required: false
    default: "3"
    help: Number of results to per page. default is 5
  
  flags:
  - long: --minimal
    short: -m
    help: only show the minumum fields
  - long: --csv
    short: -c
    help: output to csv 
 
     
- name: batch-search
  alias: b
  help: Perform a batch search using external file that outputs to csv

  args:
  - name: input_file
    required: true
    help: file name containing queries
  - name: output_file
    required: true
    help: file name containing output 
  - name: page_size 
    required: false
    default: "5"
    help: Number of results to per page. default is 5

  # flags:
  # - long: --dry-run
  #   short: -d
  #   help: Do a dry run outputing actions to perform without calling Vertex AI APIs.
  # - long: --format
  #   short: -c
  #   help: output to csv 

examples: |-
    Single search with csv output. Only shows the summary and first document link
    $ ./ges-tool s "What is the interest rate?" -c

    Single search with table output. Only shows the summary and first document link
    $ ./ges-tool s "What is the interest rate?" -m

     Single search with raw json output
    $ ./ges-tool s "What is the interest rate?" 

    Batch search with input file containing search queries and output a csv file with results. Only shows the summary and first document link
    $ ./ges-tool b search_terms.txt results_file.csv
